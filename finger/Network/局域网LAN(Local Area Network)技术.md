局域网是指在一个较小的地理范围内将各种计算机、外部设备、和数据库系统通过双绞线、同轴电缆、等连接介质相互连接起来组成资源和信息共享的计算机互连网络。
拓扑结构：星形、环形、总线形、星形和总线形结合
传输介质：双绞线、铜线和光纤，其中双绞线位主流
介质访问控制：CSMA/CD、令牌总线和令牌环形

链路层寻址：MAC地址
	MAC地址的作用 ：用于局域网内表示一个帧从哪个接口发出到达哪个物理相连的其他接口。
	48位MAC地址固化在网卡的ROM中，有时也可以软件设置，局域网中每一个网卡有一个唯一的MAC地址。
	MAC地址由IEEE统一管理和分配。
	计算机域外界局域网的连接是通过主机机箱内插入的以看网络接口卡(NIC)实现的。网卡装有处理器和存储器，是工作在链路层的网络组件，网卡和局域网的通信时通过物理介质(电缆、双绞线)实现的，网卡与计算机的通信则是通过主板上的I/O总线以并行方式进行的。网卡不仅能够实现与局域网传输介质之间的物理连接和电信号匹配还涉及帧的发送与接收、帧的封装和拆封、介质访问控制、数据的编解码以及数据缓存功能。
以太网和802.3
	物理拓扑:
		1）总线形，上世纪90年代中期流行，所有结点在同一个冲突域
		2）星型，目前的主流网络拓扑，中心交换机，每一个结点单独一个冲突域
	 以太网提供不可靠、无连接的服务：
		 不可靠：接收网卡不想发送方进行确认，对于差错的纠正由高层完成
		 无连接：发送帧的网卡域接收帧的网卡没有“握手”过程	
	 发送的数据都采用曼彻斯特编码.
	 MAC协议：采用二进制指数退避算法的CSMA/CD
		 1）NIC从网络层接收数据报，创建数据帧
		 2）监听信道:
			 如果信道空闲，开始发送帧
			 如果信道忙，则一直等待到信道空闲然后发送帧
		 3）NIC发送完整个数据帧并且没有检测到其他结点的数据发送，则NIC确认帧发送成功
		 4）如果NIC检测到其他结点传输数据，则中止发送，发送堵塞信号
		 5）中止发送后，NIC进入二进制指数退避
			 第m次冲突后：
			 取$n=Min(m,10)$
			 NIC从 $\{0,1,2,\dots,2^{n-1}\}$中随机选择一个数K
			 NIC等待K*512比特的传输延迟后回到第2步
	以太网帧：
		 前导码：共8个字节，7个字节的10101010，1个字节的10101011
		 目的MAC地址：6字节
		 源MAC地址：6字节
		 类型：2字节
		 数据：46到1500字节
		 校验和：4字节
		 注：46字节的最短数据帧如何计算?以太网带宽R=10Mbps,$RTT_{max}=512us$,$L_{min}/R=RTT_{max}$$L_{min}=64B$,以太网首部加上尾部共18字节，故64B-18B=46B.
高速以太网
	100BASE-T
	1000BASE
	万兆以太网
	40G-100G以太网
以太网交换机：
	链路层设备：1）存储-转发以太网帧
						  2）检验到达帧的目的MAC地址，选择性向一个活多个输出链路转发帧
						  3）利用CSMA/CD协议访问链路，发送帧
	透明：主机感知不到交换机的存在
	即插即用
	自学习：无需配置
		每个交换机都有一个交换表：entry(主机的MAC地址，到达主机的接口)
		 当收到帧时，交换机学习到发送帧的主机位于收到该帧的接口所连接的LAN网段
		 将发送主机MAC地址/接口信息记录到交换表中
	帧过滤/转发：
		1）记录帧的源MAC与输入链路接口
		2）利用目的MAC地址检索交换表
		3）如果在交换表中检索到与目的MAC地址匹配的entry
					a）如果目的主机位于收到帧的网段(表明目的主句与源主机在同一个网段)，则丢弃帧
					b）将帧转发到对应的接口
			 否则泛洪,将除了收到数据帧的接口以外的接口发送(比如0收到了数据帧，则向接口1到5发送数据帧)
VLANS 
	动机：一个以太网是一个广播域，当一个以太网包含过多的计算机时会导致：以太网中出现大量的广播帧(ARP,DHCP协议)，另外一个单位的不同部门共享一个局域网，存在安全/隐私，效率问题。  
	VLANS可以把一个较大的局域网分割成一些较小的逻辑上的VLAN，每个VLAN是一个广播域。   
	基于端口的VLAN：分组交换机利用端口划分VLAN(比如0-15端口，其中0-7为一个VLAN，8-15为另一个VLAN)
	跨越多交换机的VLAN：
		1）多线缆连接
		2）中继端口(trunk port)：在跨越多个物理交换机定义的VLAN承载帧
	802.1QVLAN帧格式
	在源MAC地址后多四个字节：前两个字节为0x8100，后两个字节使用前三bit表示优先级，第四个bit表示CFI，后12bit表示VLAN ID
	其他VLAN的划分方法：
		基于MAC
		基于协议
		基于子网
PPP协议(point-to-potint protocal)
	点对点数据链路控制：一个发送端，一个接收端，一条链路，比广播链路容易
	无需介质访问控制，无需明确的MAC寻址
	PPP协议设计的主要目的时用来通过拨号或专线方式建立点对点连接发送数据，使其成为主机、网桥、路由器之间简单链接的一种共同的解决方案
	PPP设计需求：
		1）组帧：将网络层数据报封装到数据链路层中，可以同时承载任何网络层协议的分组，可以向上实现分用
		2）比特透明传输：数据域必须支持承载任何比特模式
				异步传输时：字节填充
				同步传输时：零比特填充
		3）差错检测(无纠正)
		4）连接活性：检测、并向网络层通知链路状态
		5）网络地址协商：段节点可以学习/配置彼此网络地址
	 数据帧格式：
			标志(FLAG):定界符0x7E
			地址：无效,0xFF
			控制：无效，1字节未来可能的多种控制域
			协议：2字节，上层协议(PPP-LCP,IP,IPCP)
			信息：上层协议分组数据
			FCS: 2字节
			标志：0x7E
	 ppp协议的透明传输
		 在数据域中允许包含一些特殊字节，比如标志0x7E
		 在异步传输时：字节填充，利用一个转义字符(0x7d)，将特殊字符转变为两个字符
		 0x7E -> 0x7d ,0x5e (Flag Sequence)帧序列
		 0x7d -> 0x7d,0x5d (control Escape)控制转移符
		 0x03 -> 0x7d,0x23 (ETX)文本结束符
		 0x11 -> 0x7d,0x31 (XON)重新传输
		 0x13 -> 0x7d,0x33 (XOFF)传输暂停
		 0x91 -> 0x7d,0xb1 (XON with parity set) 带奇偶校验集合的XON
		 0x93 -> 0x7d,0xb3 (XOFF with parity set) 带奇偶校验集合的XOFF
		 同步传输时：零比特填充
		 信息字段宏穿线了07E，发送端在5个1后填入一个0比特，接收端遇到5个1就将后面的0删去.
		 ppp数据控制协议:
			 在交换网络层数据之前ppp数据链路两端必须：
				 1）配置ppp链路
					 a）最大帧长
					 b）身份认证
				 2）学习配置网络层信息
					 对于ip协议：通过交换IPCP协议报文，完成IP地址等相关信息配置
	PPPOE
		提供在以太网链路上的PPP连接
		实现了传统以太网不能提供的身份验证、加密，以及压缩等功能
		是实现基于用户的访问控制、计费、业务类型分类等，运营商广泛支持
		组网方式1：
			设备之间建立PPP会话，所有主机通过同一个PPP会话传送数据，主机上不用安装PPPOE客户端拨号软件，一般是一个机构公用一个账号
		 组网方式2：
			 PPP会话建立在主机和运营商的路由器之间，为每一个主机建立一个PPP会话，每个主机都是PPPOE Client，每个主机有一个账号，方便运营商对用户进行计费。
		工作过程：
			Discovery阶段：
				获取对方的以太网地址
			Seesion阶段：
				PPP协商阶段u你
				PPP数据报拆散农户
			Terminate阶段：
				会话建立后的任意时刻，发送报文结束会话。